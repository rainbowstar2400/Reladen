.stage {
  position: relative;
  width: 100%;
  min-height: 100vh;
  overflow: hidden;
  font-family: system-ui, -apple-system, "Segoe UI", "Noto Sans JP", sans-serif;
}

/* 背景（空） */
.sky {
  position: absolute;
  inset: 0;
  background: radial-gradient(1200px 600px at 50% 30%, rgba(255,255,255,0.25), transparent 60%),
              linear-gradient(180deg, rgba(120,170,220,1), rgba(210,230,250,1));
  transform: scale(1.02);
  filter: saturate(1.05);
}

/* 時間帯の差（デモ） */
.sky_morning {
  background: radial-gradient(900px 500px at 50% 25%, rgba(255,210,180,0.25), transparent 60%),
              linear-gradient(180deg, rgba(120,170,220,1), rgba(240,235,220,1));
}
.sky_day {
  background: radial-gradient(1200px 600px at 50% 30%, rgba(255,255,255,0.28), transparent 62%),
              linear-gradient(180deg, rgba(105,165,225,1), rgba(220,240,255,1));
}
.sky_evening {
  background: radial-gradient(900px 520px at 50% 30%, rgba(255,180,130,0.28), transparent 60%),
              linear-gradient(180deg, rgba(90,120,190,1), rgba(250,215,190,1));
}
.sky_night {
  background: radial-gradient(900px 520px at 50% 30%, rgba(170,190,255,0.16), transparent 60%),
              linear-gradient(180deg, rgba(20,35,70,1), rgba(65,90,130,1));
}

/* 天候の差（デモ） */
.wx_晴れ { }
.wx_くもり { filter: saturate(0.9) contrast(0.95) brightness(0.98); }
.wx_雨 { filter: saturate(0.85) contrast(0.92) brightness(0.95); }

/* 窓の桟（縦の線） */
.windowMullions {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    linear-gradient(90deg,
      transparent 0,
      transparent 27%,
      rgba(40,40,40,0.35) 27.2%,
      rgba(255,255,255,0.12) 27.45%,
      transparent 27.7%,
      transparent 72.3%,
      rgba(40,40,40,0.35) 72.5%,
      rgba(255,255,255,0.12) 72.75%,
      transparent 73%,
      transparent 100%
    );
  opacity: 0.55;
}

/* 窓ガラス上のUI全体 */
.overlay {
  position: absolute;
  inset: 0;
  padding: 28px 40px 140px;
  box-sizing: border-box;
}

/* 上部の細い帯 */
.topBar {
  display: grid;
  grid-template-columns: 180px 1fr 280px;
  gap: 12px;
  align-items: center;

  padding: 10px 14px;
  border-radius: 10px;

  border: 1px solid var(--glass-border);
  background: var(--glass-bg);
  box-shadow: 0 10px 30px rgba(0,0,0,0.16);
  backdrop-filter: blur(16px) saturate(1.2);
}

.topBarLeft,
.topBarCenter {
  font-size: 16px;
  letter-spacing: 0.02em;
  color: var(--text);
  text-shadow: var(--text-shadow);
}
.topBarCenter { opacity: 0.95; }

.topBarRight {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

.selectLabel {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: var(--text);
  font-size: 14px;
  text-shadow: var(--text-shadow);
}

.select {
  border-radius: 8px;
  border: 1px solid var(--glass-border);
  background: rgba(255,255,255,0.18);
  color: var(--text);
  padding: 6px 10px;
  outline: none;
  backdrop-filter: blur(12px) saturate(1.1);
}

/* パネル（摺りガラス） */
.panel {
  position: absolute;
  border-radius: 12px;
  border: 1px solid var(--glass-border);
  background: var(--glass-bg);
  box-shadow: 0 18px 40px rgba(0,0,0,0.18);
  backdrop-filter: blur(18px) saturate(1.25);
  color: var(--text);
}

.leftPanel {
  left: 60px;
  top: 110px;
  width: 520px;
  padding: 14px 16px 16px;
}

.rightPanel {
  right: 60px;
  top: 110px;
  width: 420px;
  padding: 14px 16px 16px;
}

.panelHeader {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 6px 14px;
  font-size: 16px;
  text-shadow: var(--text-shadow);
}

.mailIcon {
  display: inline-flex;
  width: 26px;
  height: 26px;
  align-items: center;
  justify-content: center;
  border-radius: 7px;
  border: 1px solid var(--glass-border);
  background: rgba(255,255,255,0.16);
}

.cards {
  display: grid;
  gap: 12px;
}

.card {
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.22);
  background: rgba(255,255,255,0.10);
  padding: 12px 12px 10px;
  backdrop-filter: blur(10px) saturate(1.1);
}

.cardBody {
  display: grid;
  gap: 6px;
}

.dialogLine {
  display: grid;
  grid-template-columns: 26px 1fr;
  gap: 10px;
  align-items: start;
}

.speaker {
  font-weight: 600;
  opacity: 0.95;
  text-shadow: var(--text-shadow);
}
.quote {
  opacity: 0.95;
  text-shadow: var(--text-shadow);
}

.cardMeta {
  margin-top: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.cardTime {
  font-size: 14px;
  opacity: 0.9;
  text-shadow: var(--text-shadow);
}

.linkButton {
  border: none;
  background: transparent;
  color: var(--text);
  font-size: 14px;
  opacity: 0.95;
  text-shadow: var(--text-shadow);
  cursor: pointer;
  padding: 6px 8px;
  border-radius: 8px;
}
.linkButton:hover {
  background: rgba(255,255,255,0.10);
  border: 1px solid rgba(255,255,255,0.18);
}

/* 右パネル：タイトル行 */
.rightHeaderRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 6px 4px 10px;
}

.rightTitle {
  font-size: 18px;
  font-weight: 700;
  text-shadow: var(--text-shadow);
}

.rightControls {
  display: flex;
  align-items: center;
  gap: 10px;
}

.searchBox {
  display: flex;
  align-items: center;
  gap: 6px;
  border-radius: 10px;
  border: 1px solid var(--glass-border);
  background: rgba(255,255,255,0.14);
  padding: 6px 10px;
  backdrop-filter: blur(10px) saturate(1.1);
}

.searchIcon { opacity: 0.9; }

.searchInput {
  border: none;
  outline: none;
  background: transparent;
  color: var(--text);
  width: 120px;
  text-shadow: var(--text-shadow);
}

/* 住人一覧 */
.residentList {
  max-height: 300px;
  overflow: auto;
  padding-right: 6px;
}

.residentRow {
  display: grid;
  grid-template-columns: 16px 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 10px 6px;
  border-radius: 10px;
}

.residentRow:hover {
  background: rgba(255,255,255,0.10);
  border: 1px solid rgba(255,255,255,0.16);
}

.residentName {
  font-size: 16px;
  font-weight: 650;
  text-shadow: var(--text-shadow);
}

/* 状態ドット */
.dot {
  width: 12px;
  height: 12px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.32);
  box-shadow: 0 0 0 2px rgba(0,0,0,0.06);
}

.dot_online { background: rgba(80, 220, 120, 0.9); }
.dot_idle { background: rgba(80, 170, 240, 0.9); }
.dot_sleep { background: rgba(200, 200, 220, 0.85); }

.peekButton {
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.22);
  background: rgba(255,255,255,0.10);
  color: var(--text);
  padding: 8px 14px;
  cursor: pointer;
  text-shadow: var(--text-shadow);
  backdrop-filter: blur(10px) saturate(1.1);
}
.peekButton:hover {
  background: rgba(255,255,255,0.14);
}

/* 机（下部） */
.table {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;

  height: 140px;
  display: grid;
  grid-template-columns: 1fr 240px 1fr;
  align-items: center;

  padding: 18px 40px;
  box-sizing: border-box;

  background:
    linear-gradient(180deg, rgba(0,0,0,0.00) 0%, rgba(0,0,0,0.12) 20%, rgba(0,0,0,0.22) 100%),
    linear-gradient(90deg, rgba(120,80,40,0.75), rgba(140,90,45,0.75));
  color: rgba(255,255,255,0.92);
}

.navLeft, .navRight {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  font-size: 18px;
  letter-spacing: 0.02em;
  user-select: none;
}

.navLeft { justify-content: flex-start; }
.navRight { justify-content: flex-end; }

.navArrow { opacity: 0.9; }

.clock {
  justify-self: center;
  width: 220px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.22);
  background: rgba(255,255,255,0.08);
  padding: 12px 14px;
  text-align: center;
  backdrop-filter: blur(12px) saturate(1.1);
  box-shadow: 0 18px 30px rgba(0,0,0,0.22);
}

.clockDate {
  font-size: 16px;
  opacity: 0.92;
}
.clockTime {
  margin-top: 4px;
  font-size: 28px;
  font-weight: 800;
  letter-spacing: 0.06em;
}

/* トーン（可読性調整） */
.toneLight {
  --glass-bg: rgba(255,255,255,0.16);
  --glass-border: rgba(255,255,255,0.34);
  --text: rgba(20,30,45,0.92);
  --text-shadow: 0 1px 2px rgba(255,255,255,0.35);
}

.toneDark {
  --glass-bg: rgba(20,28,45,0.22);
  --glass-border: rgba(210,220,255,0.25);
  --text: rgba(240,245,255,0.92);
  --text-shadow: 0 2px 6px rgba(0,0,0,0.55);
}

/* backdrop-filter が使えない環境の保険 */
@supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
  .panel, .topBar, .card, .peekButton, .clock, .searchBox, .select {
    background: rgba(255,255,255,0.28);
  }
  .toneDark {
    --text: rgba(255,255,255,0.92);
    --text-shadow: 0 2px 6px rgba(0,0,0,0.55);
  }
}
